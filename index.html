<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soil Study</title>

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="title">
        <h1>Soil Study</h1>
    </div>
    <div id="images">
        <div id="scroll"><img src="" alt="image scroll"></div>
    </div>
    <div id="info">
        <h2 id="contact">info@soilstudy.com<br />@soilstudy</h2>
    </div>
</body>


<script>
    document.addEventListener("DOMContentLoaded", async function () {
        try {
            // Load JSON list
            const response = await fetch("assets/images/images.json");
            const images = await response.json();

            const img = document.querySelector("#scroll img");
            let currentIndex = 0;

            // Preload all images into browser cache
            const preloaded = [];
            images.forEach(src => {
                const i = new Image();
                i.src = src;
                preloaded.push(i);
            });

            // Set initial image
            img.src = images[currentIndex];

            // Accumulator for smooth scrolling
            let scrollDelta = 0;
            const threshold = 100; // adjust sensitivity

            window.addEventListener("wheel", function (event) {
                event.preventDefault(); // prevent page scroll
                scrollDelta += event.deltaY;

                if (scrollDelta >= threshold) {
                    currentIndex = (currentIndex + 1) % images.length;
                    img.src = images[currentIndex];
                    scrollDelta = 0;
                } else if (scrollDelta <= -threshold) {
                    currentIndex = (currentIndex - 1 + images.length) % images.length;
                    img.src = images[currentIndex];
                    scrollDelta = 0;
                }
            }, { passive: false });
        } catch (err) {
            console.error("Error loading images.json:", err);
        }
    });
</script>

</html>