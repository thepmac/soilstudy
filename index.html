<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soil Study</title>

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="title">
        <h1>Soil Study</h1>
    </div>
    <div id="images">
        <div id="scroll"><img src="" alt="image scroll"></div>
    </div>
    <div id="info">
        <h2 id="contact">info@soilstudy.com<br />@soilstudy</h2>
    </div>
</body>


<script>
    document.addEventListener("DOMContentLoaded", async function () {
        try {
            const response = await fetch("assets/images/images.json");
            const images = await response.json();

            const img = document.querySelector("#scroll img");

            let currentIndex = Math.floor(Math.random() * images.length);

            const preloaded = [];
            images.forEach(src => {
                const i = new Image();
                i.src = src;
                preloaded.push(i);
            });

            img.src = images[currentIndex];

            let scrollDelta = 0;
            const threshold = 100;

            window.addEventListener("wheel", function (event) {
                event.preventDefault();
                scrollDelta += event.deltaY;

                if (scrollDelta >= threshold) {
                    currentIndex = (currentIndex + 1) % images.length;
                    img.src = images[currentIndex];
                    scrollDelta = 0;
                } else if (scrollDelta <= -threshold) {
                    currentIndex = (currentIndex - 1 + images.length) % images.length;
                    img.src = images[currentIndex];
                    scrollDelta = 0;
                }
            }, { passive: false });

            document.addEventListener("click", function () {
                currentIndex = (currentIndex + 1) % images.length;
                img.src = images[currentIndex];
            });

        } catch (err) {
            console.error("Error loading images.json:", err);
        }
    });
</script>

</html>